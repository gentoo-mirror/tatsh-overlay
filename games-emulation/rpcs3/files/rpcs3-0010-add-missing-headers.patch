From 654c5bc75ef1b7e40282572c661fd5b5a71fedc0 Mon Sep 17 00:00:00 2001
From: pastalian <pastalian46@gmail.com>
Date: Sun, 21 Jan 2024 17:41:16 +0900
Subject: [PATCH 10/10] Add missing headers

Some systems must explicitly include these headers.
---
 3rdparty/pine/pine_server.h | 2 --
 Utilities/JIT.cpp           | 1 +
 Utilities/Thread.cpp        | 1 +
 3 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/3rdparty/pine/pine_server.h b/3rdparty/pine/pine_server.h
index d3cb323cb..44f2ab708 100644
--- a/3rdparty/pine/pine_server.h
+++ b/3rdparty/pine/pine_server.h
@@ -27,10 +27,8 @@
 #include <sys/un.h>
 #include <arpa/inet.h>
 #include <poll.h>
-#if defined(__DragonFly__) || defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__APPLE__)
 #include <unistd.h>
 #endif
-#endif
 
 #ifdef _WIN32
 constexpr SOCKET invalid_socket = INVALID_SOCKET;
diff --git a/Utilities/JIT.cpp b/Utilities/JIT.cpp
index e994546e3..d8138cba5 100644
--- a/Utilities/JIT.cpp
+++ b/Utilities/JIT.cpp
@@ -14,6 +14,7 @@
 #include <charconv>
 
 #ifdef __linux__
+#include <unistd.h>
 #define CAN_OVERCOMMIT
 #endif
 
diff --git a/Utilities/Thread.cpp b/Utilities/Thread.cpp
index a81117e2d..8e536c054 100644
--- a/Utilities/Thread.cpp
+++ b/Utilities/Thread.cpp
@@ -46,6 +46,7 @@ DYNAMIC_IMPORT_RENAME("Kernel32.dll", SetThreadDescriptionImport, "SetThreadDesc
 #include <time.h>
 #endif
 #ifdef __linux__
+#include <sys/syscall.h>
 #include <sys/timerfd.h>
 #include <unistd.h>
 #endif
-- 
2.43.0

